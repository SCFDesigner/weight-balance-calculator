<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>P2006T Weight & Balance Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style type="text/css">
        body, div, table, thead, tbody, tfoot, tr, th, td, p { 
            font-family: "Liberation Sans", Arial, sans-serif; 
            font-size: small;
        }
        
        body {
            margin: 10px;
            background-color: #f5f5f5;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
        }
        
        td {
            border: 1px solid #000000;
            padding: 4px 8px;
            text-align: left;
            vertical-align: middle;
        }
        
        .input-field {
            width: 100%;
            border: none;
            background: transparent;
            font-family: inherit;
            font-size: inherit;
            text-align: right;
            padding: 2px;
        }
        
        .input-field:focus {
            outline: 2px solid #4CAF50;
            background-color: #fff;
        }
        
        /* Header styling */
        .header-black {
            background-color: #000000;
            color: #FFFFFF;
            font-weight: bold;
        }
        
        .header-orange {
            background-color: #F6C6AD;
            color: #000000;
            font-weight: normal;
        }
        
        .input-orange {
            background-color: #FBE2D6;
            color: #000000;
        }
        
        .calc-green {
            background-color: #D1E1D3;
            color: #000000;
        }
        
        .total-yellow {
            background-color: #FFFC88;
            color: #000000;
            font-weight: bold;
        }
        
        .total-green {
            background-color: #DBEDD5;
            color: #000000;
            font-weight: bold;
        }
        
        .cg-blue {
            background-color: #D0DFE6;
            color: #000000;
            font-weight: bold;
        }
        
        .limit-red {
            background-color: #FE9594;
            color: #000000;
            font-weight: bold;
        }
        
        .limit-blue {
            background-color: #CFECF7;
            color: #000000;
        }
        
        @media (max-width: 600px) {
            body {
                margin: 5px;
            }
            
            table {
                font-size: x-small;
            }
            
            td {
                padding: 2px 4px;
            }
        }
    </style>
</head>
<body>
<table cellspacing="0" border="0">
    <colgroup width="24"></colgroup>
    <colgroup width="151"></colgroup>
    <colgroup width="89"></colgroup>
    <colgroup width="21"></colgroup>
    <colgroup width="148"></colgroup>
    <colgroup width="100"></colgroup>
    <colgroup width="121"></colgroup>
    <colgroup width="159"></colgroup>
    <colgroup width="28"></colgroup>
    
    <!-- Header Row -->
    <tr>
        <td class="header-black"></td>
        <td class="header-black">Date and Time</td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Date/Time Row -->
    <tr>
        <td class="header-black"></td>
        <td class="header-orange">Date</td>
        <td class="header-orange">Time</td>
        <td class="header-orange"></td>
        <td class="header-orange">UTC Offset</td>
        <td class="header-orange">DateTime</td>
        <td class="header-orange">Zulu Time (UTC)</td>
        <td class="header-orange">Notes</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Current Date/Time -->
    <tr>
        <td class="header-black"></td>
        <td class="header-orange"><span id="currentDate"></span></td>
        <td class="header-orange"><span id="currentTime"></span></td>
        <td class="header-orange"></td>
        <td class="header-orange">-6</td>
        <td class="header-orange"><span id="dateTime"></span></td>
        <td class="header-orange"><span id="zuluTime"></span></td>
        <td class="header-orange">P2006T W&B</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Spacer -->
    <tr>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black">N130AG</td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Aircraft ID -->
    <tr>
        <td class="header-black"></td>
        <td class="header-orange">N130AG</td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td style="border-bottom: 3px solid #000000" class="header-black"></td>
        <td style="border-bottom: 3px solid #000000" class="header-black"></td>
        <td style="border-bottom: 3px solid #000000" class="header-black"></td>
        <td style="border-bottom: 3px solid #000000" class="header-black"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- W&B Title -->
    <tr>
        <td class="header-black"></td>
        <td style="border-bottom: 1px solid #000000" class="header-black"></td>
        <td style="border-bottom: 1px solid #000000" class="header-black"></td>
        <td style="border-bottom: 1px solid #000000; border-right: 3px solid #000000" class="header-black"></td>
        <td style="border-top: 3px solid #000000; border-bottom: 1px solid #000000; border-left: 3px solid #000000" class="header-black">Weight & Balance Calculations (P2006T)</td>
        <td style="border-top: 3px solid #000000; border-bottom: 1px solid #000000" class="header-black"></td>
        <td style="border-top: 3px solid #000000; border-bottom: 1px solid #000000" class="header-black"></td>
        <td style="border-top: 3px solid #000000; border-bottom: 1px solid #000000; border-right: 3px solid #000000" class="header-black"></td>
        <td style="border-bottom: 1px solid #000000; border-left: 3px solid #000000" class="header-black"></td>
    </tr>
    
    <!-- Summary Row -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Weight</td>
        <td class="input-orange"><span id="summaryWeight">2653.3</span></td>
        <td class="header-black"></td>
        <td>Item</td>
        <td>Weight(Lbs)</td>
        <td>Arm--CG(in)</td>
        <td>Moment (lbs-in)</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Arm Row -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Arm</td>
        <td class="input-orange"><span id="summaryArm">86.02</span></td>
        <td class="header-black"></td>
        <td>Basic Empty Weight</td>
        <td class="calc-green">2653.3</td>
        <td class="calc-green">86.0225</td>
        <td class="calc-green"><span id="emptyMoment">228367.6</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Moment Row -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Moment</td>
        <td class="input-orange"><span id="summaryMoment">228367.6</span></td>
        <td class="header-black"></td>
        <td>Front Seats</td>
        <td class="calc-green"><span id="frontSeatsWeight">0</span></td>
        <td>80.5</td>
        <td><span id="frontSeatsMoment">0</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- My Weight Input -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">My Weight</td>
        <td class="input-orange"><input type="number" class="input-field" id="myWeight" placeholder="0"></td>
        <td class="header-black"></td>
        <td>Rear Seats</td>
        <td><span id="rearSeatsWeight">0</span></td>
        <td>118.1</td>
        <td><span id="rearSeatsMoment">0</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Instructor Weight Input -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Instructor Weight</td>
        <td class="input-orange"><input type="number" class="input-field" id="instructorWeight" placeholder="0"></td>
        <td class="header-black"></td>
        <td>Baggage 1</td>
        <td class="calc-green"><span id="baggage1Weight">0</span></td>
        <td>142.8</td>
        <td><span id="baggage1Moment">0</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Rear Passenger Input -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Rear Passenger</td>
        <td class="input-orange"><input type="number" class="input-field" id="rearPassenger" placeholder="0"></td>
        <td class="header-black"></td>
        <td>Baggage 2</td>
        <td class="header-black"><span id="baggage2Weight">0</span></td>
        <td class="header-black">0</td>
        <td class="header-black"><span id="baggage2Moment">0</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Baggage Input -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Baggage</td>
        <td class="input-orange"><input type="number" class="input-field" id="baggageWeight" placeholder="0"></td>
        <td class="header-black"></td>
        <td>Zero Fuel Weight</td>
        <td class="total-yellow"><span id="zeroFuelWeight">2653.3</span></td>
        <td class="cg-blue"><span id="zeroFuelArm">86.02</span></td>
        <td><span id="zeroFuelMoment">228367.6</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Fuel Input -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Fuel (lbs)</td>
        <td class="input-orange"><input type="number" class="input-field" id="fuelWeight" placeholder="0"></td>
        <td class="header-black"></td>
        <td>Fuel</td>
        <td class="input-orange"><span id="fuelWeightDisplay">0</span></td>
        <td>95</td>
        <td><span id="fuelMoment">0</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Empty Row -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td>Ramp Weight</td>
        <td><span id="rampWeight">2653.3</span></td>
        <td><span id="rampArm">86.02</span></td>
        <td><span id="rampMoment">228367.6</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Ground Fuel Use -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Ground Fuel Use</td>
        <td class="input-orange"><input type="number" class="input-field" id="groundFuel" placeholder="16" value="16"></td>
        <td class="header-black"></td>
        <td>Grnd Fuel Use</td>
        <td><span id="groundFuelDisplay">-16</span></td>
        <td>95</td>
        <td><span id="groundFuelMoment">-1520</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Empty Row -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td>T/O Weight</td>
        <td class="total-green"><span id="takeoffWeight">2637.3</span></td>
        <td class="cg-blue"><span id="takeoffArm">86.02</span></td>
        <td><span id="takeoffMoment">226847.6</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Limits Section -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td>Limits</td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Max Weights -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td>Max T/O Weight</td>
        <td>3800</td>
        <td>Max LDG Weight</td>
        <td>3800</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- CG Limits -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td>T/O CG fwd/aft</td>
        <td class="calc-green">88.123/ 93</td>
        <td>LDG CG fwd/aft</td>
        <td class="limit-red">85.06 / 93</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Zero Fuel CG -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td>Zero Fuel CG fwd/aft</td>
        <td class="total-yellow">84.5/ 93</td>
        <td>Demo. Crosswind</td>
        <td>17kt</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Weather Section -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Weather Observation</td>
        <td class="input-orange"><input type="number" class="input-field" id="weatherObs" placeholder="301353"></td>
        <td class="header-black"></td>
        <td>Weather</td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Wind Direction -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Wind Direction</td>
        <td class="input-orange"><input type="number" class="input-field" id="windDirection" placeholder="210"></td>
        <td class="header-black"></td>
        <td>Aprt. Wx. Observation</td>
        <td class="calc-green"><span id="wxObsDisplay">301353Z</span></td>
        <td>Crosswind</td>
        <td class="total-yellow"><span id="crosswindCalc">7.5</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Wind Speed -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Wind Speed</td>
        <td class="input-orange"><input type="number" class="input-field" id="windSpeed" placeholder="15"></td>
        <td class="header-black"></td>
        <td>Surface Wind</td>
        <td class="calc-green"><span id="surfaceWind">210 At 15 Kts</span></td>
        <td>Headwind</td>
        <td class="calc-green"><span id="headwindCalc">12.99</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Visibility -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Visibility</td>
        <td class="input-orange"><input type="number" class="input-field" id="visibility" placeholder="10"></td>
        <td class="header-black"></td>
        <td>Vis/Weather</td>
        <td class="calc-green"><span id="visWeather">10SM /clr</span></td>
        <td>Airport Elevation</td>
        <td class="calc-green"><span id="airportElevation">643</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Weather Condition -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Weather</td>
        <td class="input-orange"><input type="text" class="input-field" id="weatherCondition" placeholder="clr"></td>
        <td class="header-black"></td>
        <td>Temp/Dew Pt.</td>
        <td class="calc-green"><span id="tempDewPt">23 / 6</span></td>
        <td>Pressure Altitude</td>
        <td class="limit-blue"><span id="pressureAltitude">793</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Temperature -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Temperature</td>
        <td class="input-orange"><input type="number" class="input-field" id="temperature" placeholder="23"></td>
        <td class="header-black"></td>
        <td>Altimeter Setting</td>
        <td class="calc-green"><span id="altimeterSetting">29.77</span></td>
        <td>Density Altitude</td>
        <td class="limit-blue"><span id="densityAltitude">1943.32</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Dewpoint -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Dewpoint</td>
        <td class="input-orange"><input type="number" class="input-field" id="dewpoint" placeholder="6"></td>
        <td class="header-black"></td>
        <td>Performance Data</td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Altimeter -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Altimeter</td>
        <td class="input-orange"><input type="number" class="input-field" id="altimeter" placeholder="29.77" step="0.01"></td>
        <td class="header-black"></td>
        <td>Expected Runway</td>
        <td>18L</td>
        <td>Runway Length</td>
        <td><span id="runwayLength">7002</span></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Headwind Row -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td style="background-color: #A3C4A7">Headwind</td>
        <td style="background-color: #B8DCAB"><span id="headwindDisplay">12.99</span></td>
        <td class="header-black"></td>
        <td style="background-color: #A3C4A7">T/O Grnd Roll</td>
        <td class="calc-green"></td>
        <td style="background-color: #FE5155">LDG Grnd Roll</td>
        <td style="background-color: #FE9594"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Crosswind Row -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td style="background-color: #FFFF00">Crosswind</td>
        <td class="total-yellow"><span id="crosswindDisplay">7.5</span></td>
        <td class="header-black"></td>
        <td style="background-color: #A3C4A7">T/0 Dist. (50')</td>
        <td class="calc-green"></td>
        <td style="background-color: #FE5155">LDG Dist. (50')</td>
        <td style="background-color: #FE9594"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Field Elevation -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Field Elevation</td>
        <td class="input-orange"><input type="number" class="input-field" id="fieldElevation" placeholder="643"></td>
        <td class="header-black"></td>
        <td>Maintenance Data</td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Pressure Altitude Calc -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td style="background-color: #9FD8EE">Pressure Altitude</td>
        <td class="limit-blue"><span id="pressureAltCalc">793</span></td>
        <td class="header-black"></td>
        <td>Time to Next Mx</td>
        <td>50 Hr / 37.1</td>
        <td>100 Hr / 87.1</td>
        <td>AD/4897</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Density Altitude Calc -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td style="background-color: #9FD8EE">Density Altitude</td>
        <td class="limit-blue"><span id="densityAltCalc">1943.32</span></td>
        <td class="header-black"></td>
        <td>Days to Next Mx</td>
        <td>AD/</td>
        <td>Annual / 192</td>
        <td>Regist / </td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Empty Row -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td>Aircraft Reference Speeds (SE & ME)</td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Runway Heading -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Rwy Hdg</td>
        <td class="input-orange"><span id="runwayHeading">180</span></td>
        <td class="header-black"></td>
        <td>Vr - 75</td>
        <td>Vxse - 82</td>
        <td>Vle - 140</td>
        <td>Vg - 88</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Takeoff Performance -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td style="background-color: #A3C4A7">Takeoff GR</td>
        <td class="calc-green"></td>
        <td class="header-black"></td>
        <td>Vr 50' - 70</td>
        <td>Vyse - 88</td>
        <td>Vlo - 109</td>
        <td>Vmc - 56</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- 50 FT Obstacle -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td style="background-color: #A3C4A7">50 FT Obst</td>
        <td class="calc-green"></td>
        <td class="header-black"></td>
        <td>Vx - 82</td>
        <td>Vs0 - 55</td>
        <td>Va - 135</td>
        <td>Vapp short - 75</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Runway Length -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-orange">Rwy Length</td>
        <td class="input-orange"><span id="runwayLengthInput">7002</span></td>
        <td class="header-black"></td>
        <td>Vy - 88</td>
        <td>Vs1 - 57</td>
        <td>Va max - 135</td>
        <td>Vapp normal - 80</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Landing Performance -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td style="background-color: #FD5155">Landing GR</td>
        <td style="background-color: #FE9594"></td>
        <td class="header-black"></td>
        <td>Vcc - 105</td>
        <td>Vfe - 111</td>
        <td>Vne - 202</td>
        <td>Vapp flapless - 80-85</td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Landing 50 FT -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td style="background-color: #FD5155">50 FT Obst</td>
        <td style="background-color: #FE9594"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
    </tr>
    
    <!-- Final Empty Row -->
    <tr>
        <td style="border-right: 1px solid #000000" class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
        <td class="header-black"></td>
    </tr>
</table>

    <script>
        class WeightBalanceCalculator {
            constructor() {
                this.updateDateTime();
                this.setupEventListeners();
                this.calculate();
                // Update time every minute
                setInterval(() => this.updateDateTime(), 60000);
            }

            updateDateTime() {
                const now = new Date();
                const localDate = now.toLocaleDateString('en-US', {month: '2-digit', day: '2-digit', year: '2-digit'});
                const localTime = now.toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit'});
                const dateTime = now.toLocaleDateString('en-US', {month: '2-digit', day: '2-digit', year: '2-digit'}) + ' ' + 
                                now.toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute: '2-digit'});
                
                // Calculate Zulu time (UTC)
                const utc = new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (6 * 3600000)); // Assuming CST (-6)
                const zuluTime = utc.toLocaleDateString('en-US', {month: '2-digit', day: '2-digit', year: '2-digit'}) + ' ' + 
                                utc.toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute: '2-digit'});

                document.getElementById('currentDate').textContent = localDate;
                document.getElementById('currentTime').textContent = localTime;
                document.getElementById('dateTime').textContent = dateTime;
                document.getElementById('zuluTime').textContent = zuluTime;
            }

            setupEventListeners() {
                const inputs = ['myWeight', 'instructorWeight', 'rearPassenger', 'baggageWeight', 'fuelWeight', 'groundFuel',
                               'weatherObs', 'windDirection', 'windSpeed', 'visibility', 'weatherCondition', 'temperature', 
                               'dewpoint', 'altimeter', 'fieldElevation'];
                inputs.forEach(id => {
                    document.getElementById(id).addEventListener('input', () => this.calculate());
                });
            }

            calculate() {
                // Get input values
                const emptyWeight = 2653.3;
                const emptyArm = 86.0225;
                const emptyMoment = emptyWeight * emptyArm;

                const myWeight = parseFloat(document.getElementById('myWeight').value) || 0;
                const instructorWeight = parseFloat(document.getElementById('instructorWeight').value) || 0;
                const rearPassenger = parseFloat(document.getElementById('rearPassenger').value) || 0;
                const baggageWeight = parseFloat(document.getElementById('baggageWeight').value) || 0;
                const fuelWeight = parseFloat(document.getElementById('fuelWeight').value) || 0;
                const groundFuel = parseFloat(document.getElementById('groundFuel').value) || 16;

                // Calculate moments
                const frontSeatsWeight = myWeight + instructorWeight;
                const frontSeatsMoment = frontSeatsWeight * 80.5;
                const rearSeatsMoment = rearPassenger * 118.1;
                const baggage1Moment = baggageWeight * 142.8;
                const fuelMoment = fuelWeight * 95.0;
                const groundFuelMoment = -groundFuel * 95.0;

                // Calculate totals
                const zeroFuelWeight = emptyWeight + frontSeatsWeight + rearPassenger + baggageWeight;
                const zeroFuelMoment = emptyMoment + frontSeatsMoment + rearSeatsMoment + baggage1Moment;
                const zeroFuelArm = zeroFuelWeight > 0 ? zeroFuelMoment / zeroFuelWeight : 0;

                const rampWeight = zeroFuelWeight + fuelWeight;
                const rampMoment = zeroFuelMoment + fuelMoment;
                const rampArm = rampWeight > 0 ? rampMoment / rampWeight : 0;

                const takeoffWeight = rampWeight - groundFuel;
                const takeoffMoment = rampMoment + groundFuelMoment;
                const takeoffArm = takeoffWeight > 0 ? takeoffMoment / takeoffWeight : 0;

                // Update displays
                document.getElementById('frontSeatsWeight').textContent = frontSeatsWeight.toFixed(0);
                document.getElementById('frontSeatsMoment').textContent = Math.round(frontSeatsMoment);
                document.getElementById('rearSeatsWeight').textContent = rearPassenger.toFixed(0);
                document.getElementById('rearSeatsMoment').textContent = Math.round(rearSeatsMoment);
                document.getElementById('baggage1Weight').textContent = baggageWeight.toFixed(0);
                document.getElementById('baggage1Moment').textContent = Math.round(baggage1Moment);
                
                document.getElementById('zeroFuelWeight').textContent = zeroFuelWeight.toFixed(1);
                document.getElementById('zeroFuelArm').textContent = zeroFuelArm.toFixed(2);
                document.getElementById('zeroFuelMoment').textContent = Math.round(zeroFuelMoment);

                document.getElementById('fuelWeightDisplay').textContent = fuelWeight.toFixed(0);
                document.getElementById('fuelMoment').textContent = Math.round(fuelMoment);

                document.getElementById('rampWeight').textContent = rampWeight.toFixed(1);
                document.getElementById('rampArm').textContent = rampArm.toFixed(2);
                document.getElementById('rampMoment').textContent = Math.round(rampMoment);

                document.getElementById('groundFuelDisplay').textContent = (-groundFuel).toFixed(0);
                document.getElementById('groundFuelMoment').textContent = Math.round(groundFuelMoment);

                document.getElementById('takeoffWeight').textContent = takeoffWeight.toFixed(1);
                document.getElementById('takeoffArm').textContent = takeoffArm.toFixed(2);
                document.getElementById('takeoffMoment').textContent = Math.round(takeoffMoment);

                // Update summary
                document.getElementById('summaryWeight').textContent = takeoffWeight.toFixed(1);
                document.getElementById('summaryArm').textContent = takeoffArm.toFixed(2);
                document.getElementById('summaryMoment').textContent = Math.round(takeoffMoment);

                // Update weather calculations
                this.updateWeatherCalculations();

                // Update limit status colors
                this.updateLimitColors(takeoffWeight, takeoffArm, zeroFuelArm);
            }

            updateWeatherCalculations() {
                // Get weather input values
                const weatherObs = document.getElementById('weatherObs').value || '301353';
                const windDirection = parseFloat(document.getElementById('windDirection').value) || 210;
                const windSpeed = parseFloat(document.getElementById('windSpeed').value) || 15;
                const visibility = parseFloat(document.getElementById('visibility').value) || 10;
                const weatherCondition = document.getElementById('weatherCondition').value || 'clr';
                const temperature = parseFloat(document.getElementById('temperature').value) || 23;
                const dewpoint = parseFloat(document.getElementById('dewpoint').value) || 6;
                const altimeter = parseFloat(document.getElementById('altimeter').value) || 29.77;
                const fieldElevation = parseFloat(document.getElementById('fieldElevation').value) || 643;

                // Calculate runway heading (simplified - 18L = 180, 36R = 360)
                const runwayHeading = 180; // Default for 18L

                // Calculate crosswind and headwind
                const windAngleDiff = Math.abs(windDirection - runwayHeading);
                const headwind = Math.abs(windSpeed * Math.cos(windAngleDiff * Math.PI / 180));
                const crosswind = Math.abs(windSpeed * Math.sin(windAngleDiff * Math.PI / 180));

                // Calculate pressure altitude
                const pressureAltitude = (29.92 - altimeter) * 1000 + fieldElevation;

                // Calculate density altitude (simplified formula)
                const standardTemp = 15 - (fieldElevation / 1000) * 2;
                const densityAltitude = pressureAltitude + (120 * (temperature - standardTemp));

                // Update displays
                document.getElementById('wxObsDisplay').textContent = weatherObs + 'Z';
                document.getElementById('surfaceWind').textContent = `${windDirection} At ${windSpeed} Kts`;
                document.getElementById('headwindCalc').textContent = headwind.toFixed(2);
                document.getElementById('crosswindCalc').textContent = crosswind.toFixed(2);
                document.getElementById('headwindDisplay').textContent = headwind.toFixed(2);
                document.getElementById('crosswindDisplay').textContent = crosswind.toFixed(2);
                
                document.getElementById('visWeather').textContent = `${visibility}SM /${weatherCondition}`;
                document.getElementById('tempDewPt').textContent = `${temperature} / ${dewpoint}`;
                document.getElementById('altimeterSetting').textContent = altimeter.toFixed(2);
                document.getElementById('airportElevation').textContent = fieldElevation.toString();
                
                document.getElementById('pressureAltitude').textContent = Math.round(pressureAltitude).toString();
                document.getElementById('pressureAltCalc').textContent = Math.round(pressureAltitude).toString();
                document.getElementById('densityAltitude').textContent = Math.round(densityAltitude).toString();
                document.getElementById('densityAltCalc').textContent = Math.round(densityAltitude).toString();
                
                document.getElementById('runwayHeading').textContent = runwayHeading.toString();
            }

            updateLimitColors(takeoffWeight, takeoffArm, zeroFuelArm) {
                // Update takeoff weight cell color
                const takeoffWeightCell = document.getElementById('takeoffWeight').parentElement;
                if (takeoffWeight > 3800) {
                    takeoffWeightCell.className = 'limit-red';
                } else {
                    takeoffWeightCell.className = 'total-green';
                }

                // Update takeoff CG cell color
                const takeoffArmCell = document.getElementById('takeoffArm').parentElement;
                if (takeoffArm < 88.123 || takeoffArm > 93.0) {
                    takeoffArmCell.className = 'limit-red';
                } else {
                    takeoffArmCell.className = 'cg-blue';
                }

                // Update zero fuel CG cell color
                const zeroFuelArmCell = document.getElementById('zeroFuelArm').parentElement;
                if (zeroFuelArm < 84.5 || zeroFuelArm > 93.0) {
                    zeroFuelArmCell.className = 'limit-red';
                } else {
                    zeroFuelArmCell.className = 'cg-blue';
                }
            }
        }

        // Initialize calculator
        let calculator;
        document.addEventListener('DOMContentLoaded', () => {
            calculator = new WeightBalanceCalculator();
        });
    </script>
</body>
</html>
